!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.r(t);var i,a,c=function(e,t){var n=new XMLHttpRequest;return"function"==typeof t&&(n.onreadystatechange=function(){if(4===n.readyState&&200===n.status){var e;try{e=JSON.parse(n.response)}catch(e){return e}t.call(null,e)}}),n.open("GET",e,!0),n.timeout=4e3,n.withCredentials=!0,n.send(),!0},d=function(e,t){return"object"===r(t)&&(t=JSON.stringify(t)),void 0!==t&&""!==t&&"{}"!==t?"&".concat(e,"=").concat(encodeURIComponent(t)):""},l=!0,s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a=function(){for(var e=(+new Date).toString(36),t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",n="",o=0;o<16;o++)n+=t[Math.floor(Math.random()*t.length)];return"".concat(e,"-").concat(n)}(),i=t}var t,n,r;return t=e,(n=[{key:"emit",value:function(e,t){var n=function(e,t){var n="https://".concat(i,"/ingestly-").concat(e,"/").concat((+new Date).toString(36),"/");for(var o in n+="?rootId=".concat(a),t)n+=d(o,t[o]);return n}(e,t);if("sendBeacon"in navigator&&"function"==typeof navigator.sendBeacon&&!0===l){try{l=navigator.sendBeacon(n)}catch(e){l=!1}if(!l)if("function"==typeof window.fetch&&"function"==typeof window.AbortController){var o=new AbortController,r={signal:o.signal,method:"POST",cache:"no-store",keepalive:!0};setTimeout((function(){return o.abort()}),4e3),window.fetch(n,r)}else c(n)}else c(n)}}])&&o(t.prototype,n),r&&o(t,r),e}();function u(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var m={},f=0,p=function(){function e(t){var n,o;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.en&&t.ef>0){try{n=new CustomEvent(t.en)}catch(e){(n=window[t.tw].document.createEvent("CustomEvent")).initCustomEvent(t.en,!1,!1,{})}window[t.tw].requestAnimationFrame=window[t.tw].requestAnimationFrame||window[t.tw].mozRequestAnimationFrame||window[t.tw].webkitRequestAnimationFrame,function e(){if(window[t.tw].requestAnimationFrame(e),o)return!1;o=setTimeout((function(){window[t.tw].dispatchEvent(n),o=null}),t.ef)}()}}var t,n,o;return t=e,(n=[{key:"addListener",value:function(e,t,n,o){return e.addEventListener(t,n,o),m[f]={element:e,type:t,listener:n,capture:o},f++}},{key:"removeListener",value:function(e){if(e in m){var t=m[e];t.element.removeEventListener(t.type,t.listener,t.capture)}}}])&&u(t.prototype,n),o&&u(t,o),e}();function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,(n=[{key:"getPerformanceInfo",value:function(e){if("navigation"in window[e].performance&&"timing"in window[e].performance){var t=window[e].performance.timing,n=window[e].performance.navigation,o=t.domLoading,r=t.domInteractive-o,i=t.domContentLoadedEventStart-o,a=t.domComplete-o,c=+new Date-o;return{ptTti:r>=0?r:void 0,ptDcl:i>=0?i:void 0,ptComplete:a>=0?a:void 0,ptElapsedMs:c>=0?c:void 0,nvType:n.type,nvRdCnt:n.redirectCount}}return{}}},{key:"getClientInfo",value:function(e){var t,n,o=navigator.userAgent,r=screen.orientation||screen.mozOrientation||screen.msOrientation||"not-supported";return"object"===g(r)&&(r=r.type),o.match(/iPhone|iPod/g)?(n="iOS",t="Mobile"):o.match(/iPad/g)?(n="iOS",t="Tablet"):o.match(/Android/g)?o.match(/Windows Phone/g)?(n="Windows Phone",t="Mobile"):(n="Android",t=o.match(/Mobile/g)?"Mobile":"Tablet"):o.match(/Windows/g)?(n="Windows",t="Desktop"):o.match(/Mac OS X/g)?(n="Mac OS X",t="Desktop"):o.match(/Linux/g)?(n="Linux",t="Desktop"):o.match(/CrOS/g)?(n="Chrome OS",t="Desktop"):o.match(/Nintendo|PlayStation|Xbox/g)?(n="Other",t="Game"):(n="Other",t="Unknown"),{vpHeight:window[e].innerHeight,vpWidth:window[e].innerWidth,scHeight:window[e].screen.height,scWidth:window[e].screen.width,scOrientation:r,dvType:t,dvOs:n,dvPlatform:navigator.platform}}},{key:"getMediaInfo",value:function(e){return!!e&&{mdSrc:e.src,mdCurrentTime:Math.round(10*e.currentTime)/10,mdDuration:Math.round(10*e.duration)/10,mdPlayedPercent:Math.round(e.currentTime/e.duration*1e3)/10,mdAttr:{type:e.type||void 0,width:e.clientWidth||void 0,height:e.clientHeight||void 0,muted:e.muted||!1,defaultMuted:e.defaultMuted||!1,autoplay:e.autoplay||!1,playerId:e.playerId||void 0,dataset:e.dataset}}}},{key:"getFormStats",value:function(e,t,n,o){var r=n.name||n.id||"-",i=0;if("select"===n.tagName.toLowerCase())for(var a=0;a<n.length;a++)n[a].selected&&i++;else i="input"!==n.tagName.toLowerCase()||"checkbox"!==n.type&&"radio"!==n.type?n.value.length:n.checked?1:0;return"hidden"!==n.type&&(e.fmItems[r]={status:t,length:i}),e.fmFirstItem||(e.fmFirstItem=n.name||n.id||"-",e.fmStartedSinceInitMs=+new Date-o),e.fmLastItem=n.name||n.id||"-",e.fmEndedSinceInitMs=+new Date-o,e.fmDurationMs=e.fmEndedSinceInitMs-e.fmStartedSinceInitMs,e}},{key:"getVisibility",value:function(e,t){var n=0,o={};try{o=e.getBoundingClientRect(),n=e.innerText.length}catch(e){o={}}var r=window[t].innerHeight,i=window[t].document.documentElement.scrollHeight,a=window[t].document.visibilityState||"unknown",c="pageYOffset"in window[t]?window[t].pageYOffset:(window[t].document.documentElement||window[t].document.body.parentNode||window[t].document.body).scrollTop,d=c+r,l=o.height,s=o.top<=0?0:o.top,u=-1*(o.bottom-r)<=0?0:-1*(o.bottom-r),m=d,f=d/i,p=null,g=null,v=!1;return o.top>=0&&o.bottom>r&&o.top>=r?(p=null,g=null,v=!1):o.top>=0&&o.bottom>r&&o.top<r?(p=0,g=r-o.top,v=!0):o.top<0&&o.bottom>r?(g=(p=-1*o.top)+r,v=!0):o.top>=0&&o.bottom<=r?(p=0,g=l,v=!0):o.top<0&&o.bottom>=0&&o.bottom<=r?(p=l+o.top,g=l,v=!0):o.top<0&&o.bottom<0?(p=null,g=null,v=!1):v=!1,{dHeight:i,dIsVisible:a,dVisibleTop:c,dVisibleBottom:d,dScrollUntil:m,dScrollRate:f,tHeight:l,tVisibleTop:p,tVisibleBottom:g,tMarginTop:s,tMarginBottom:u,tScrollUntil:g,tScrollRate:g/l,tViewableRate:(g-p)/l,tIsInView:v,tLength:n}}},{key:"queryMatch",value:function(e,t){var n,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,i="button",a=[];for(3===t.nodeType&&(t=t.parentNode);t&&t!==window[r].document;){var c=(t.matches||t.msMatchesSelector||function(){return!1}).bind(t);if(o)t.hasAttribute(o)&&a.unshift(t.getAttribute(o));else{var d=t.tagName.toLowerCase();"html"!==d&&"body"!==d&&(t.id&&(d+=".".concat(t.id)),a.unshift(d))}!n&&c(e)&&(i="a"===t.tagName.toLowerCase()?"link":t.tagName.toLowerCase(),n=t),t=t.parentNode}return!!(n&&a.length>0)&&{element:n,category:i,path:a.join(">")}}},{key:"mergeObj",value:function(e){for(var t={},n=0;n<e.length;n++)for(var o in e[n])"object"!==g(e[n][o])||null===e[n][o]||Array.isArray(e[n][o])?Array.isArray(e[n][o])?t[o]=t[o]?t[o].concat(e[n][o]):e[n][o]:t[o]=e[n][o]:t[o]=t[o]?this.mergeObj([t[o],e[n][o]]):e[n][o];return t}},{key:"parseUrl",value:function(e){var t,n={},o=document.createElement("a");return e&&(o.href=e,t=o.search.slice(1).split("&").reduce((function(e,t){var n=t.split("=");return e[n[0]]=n[1],e}),{}),n={Protocol:o.protocol,Host:o.hostname,Port:o.port,Path:o.pathname,Search:o.search,Hash:o.hash,Query:t}),n}},{key:"readCookie",value:function(e){var t=window.document.cookie||"";return("; ".concat(t,";").match("; ".concat(e,"=([^S;]*)"))||[])[1]}}])&&v(t.prototype,n),o&&v(t,o),e}();function w(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var y,b,k,S,T,M,C,L,O,I=+new Date,A={media:[],form:[]},P=I,R=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataModel={},this.trackReadTargets=[],this.trackFormTargets=[]}var t,n,o;return t=e,(n=[{key:"config",value:function(e){y=e,M=new h,S=new s(y.endpoint),b=y.targetWindow||"self",C=M.parseUrl(window[b].document.location.href),L=M.parseUrl(window[b].document.referrer),O="onbeforeunload"in window[b]?"beforeunload":"onpagehide"in window[b]?"pagehide":"unload"}},{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.dataModel=e,this.dataModel.key=y.apiKey,this.dataModel.sdk="JS-".concat("1.0.0");try{k=JSON.parse(decodeURIComponent(M.readCookie("ingestlyConsent")))}catch(e){k={}}for(var t in C)this.dataModel["ur".concat(t)]=C[t];for(var n in L)this.dataModel["rf".concat(n)]=L[n];void 0===T&&(T=new p({en:y.eventName,ef:y.eventFrequency,tw:b})),y.options&&(y.options.rum&&y.options.rum.enable&&("interactive"===window[b].document.readyState||"complete"===window[b].document.readyState?this.trackAction("rum","page",{}):this.trackPerformance()),y.options.unload&&y.options.unload.enable&&this.trackUnload(),y.options.scroll&&y.options.scroll.enable&&this.trackScroll(),y.options.read&&y.options.read.enable&&(this.trackReadTargets=[].slice.call(y.options.read.targets),this.trackRead()),y.options.clicks&&y.options.clicks.enable&&this.trackClicks(),y.options.media&&y.options.media.enable&&this.trackMedia(),y.options.form&&y.options.form.enable&&(this.trackFormTargets=[].slice.call(y.options.form.targets),this.trackForm()))}},{key:"setConsent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=0;!1===e.cookie?(t=1,k.cookie=!1):k.cookie=e.cookie?e.cookie:y.useCookie,!1===e.measurement?k.measurement=!1:k.measurement=!0,k.measurement=!e.measurement,S.emit("consent",{key:y.apiKey,dc:t,ap:encodeURIComponent(JSON.stringify(e))})}},{key:"trackAction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"unknown",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unknown",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=+new Date,r={action:e,category:t,sinceInitMs:o-I,sincePrevMs:o-P,consent:k},i=M.mergeObj([this.dataModel,r,n,M.getClientInfo(b),"performance"in window[b]?M.getPerformanceInfo(b):{}]);!0===k.cookie?i.ck=!0:!1===k.cookie?i.ck=!1:i.ck=!!y.useCookie,P=o,!1!==k.measurement&&S.emit("ingest",i)}},{key:"trackPage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.trackAction("view","page",e)}},{key:"trackPerformance",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};T.removeListener(A.performance),A.performance=T.addListener(window[b].document,"DOMContentLoaded",(function(){e.trackAction("rum","page",t)}),!1)}},{key:"trackUnload",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};T.removeListener(A.unload),A.unload=T.addListener(window[b],O,(function(){e.trackAction("unload","page",t)}),!1)}},{key:"trackClicks",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};T.removeListener(A.click),A.click=T.addListener(window[b].document.body,"click",(function(n){var o=y.options.clicks.targetAttr||!1,r=M.queryMatch('a, button, input, [role="button"]',n.target,o,b),i=null;if(r){var a={clTag:(i=r.element).tagName,clId:i.id||void 0,clClass:i.className||void 0,clPath:r.path||void 0,clLink:i.href||void 0,clText:i.innerText||i.value||void 0,clAttr:i.dataset||void 0};e.trackAction("click",r.category,M.mergeObj([a,t]))}}),!1)}},{key:"trackScroll",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=y.options.scroll.granularity||20,o=100/n,r=1e3*y.options.scroll.threshold||2e3,i={},a=0,c=0,d="percent";T.removeListener(A.scroll),A.scroll=T.addListener(window[b],y.eventName,(function(){"hidden"!==(i=M.getVisibility(null,b)).dIsVisible&&"prerender"!==i.dIsVisible&&("percent"===y.options.scroll.unit?a=Math.floor(i.dScrollRate*o)*n:(a=i.dScrollUntil,d="pixel"),("percent"===d&&a>c&&a>=0&&a<=100||"pixel"===d&&a>c&&a>=n)&&setTimeout((function(){if(a>c){var o={pgH:i.dHeight,srDepth:a,srUnit:d};e.trackAction("scroll","page",M.mergeObj([o,t])),c="percent"===d?a:a+n}}),r))}),!1)}},{key:"trackRead",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.trackReadTargets&&0!==this.trackReadTargets.length){var n=y.options.read.granularity||20,o=100/n,r=1e3*y.options.read.threshold||2e3,i=[],a=[],c=[];T.removeListener(A.read),A.read=T.addListener(window[b],y.eventName,(function(){for(var d=function(d){a[d]=a[d]||0,c[d]=c[d]||0,i[d]=M.getVisibility(e.trackReadTargets[d],b),"hidden"!==i[d].dIsVisible&&"prerender"!==i[d].dIsVisible&&i[d].tIsInView&&(a[d]=Math.floor(i[d].tScrollRate*o)*n,a[d]>c[d]&&a[d]>=0&&a[d]<=100&&setTimeout((function(){if(a[d]>c[d]&&e.trackReadTargets[d]){var n={rdIdx:d,rdId:e.trackReadTargets[d].id||void 0,rdTxS:e.trackReadTargets[d].innerText.substring(0,12)||void 0,rdTgH:i[d].tHeight,rdTxL:i[d].tLength,rdRate:a[d],rdAttr:e.trackReadTargets[d].dataset||void 0};e.trackAction("read","content",M.mergeObj([n,t])),100===a[d]&&e.trackReadTargets.splice(d,1),c[d]=a[d]}}),r))},l=0;l<e.trackReadTargets.length;l++)d(l)}),!1)}}},{key:"trackMedia",value:function(){for(var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=["play","pause","ended"],o=y.options.media.heartbeat||5,r={},i=0;i<n.length;i++)T.removeListener(A.media[n[i]]),A.media[n[i]]=T.addListener(window[b].document.body,n[i],(function(n){var o=M.getMediaInfo(n.target);e.trackAction(n.type,n.target.tagName.toLowerCase(),M.mergeObj([o,t]))}),{capture:!0});T.removeListener(A.media.timeupdate),A.media.timeupdate=T.addListener(window[b].document,"timeupdate",(function(n){if(r[n.target.src])return!1;r[n.target.src]=setTimeout((function(){if(!0!==n.target.paused&&!0!==n.target.ended){var o=M.getMediaInfo(n.target);e.trackAction(n.type,n.target.tagName.toLowerCase(),M.mergeObj([o,t]))}r[n.target.src]=!1}),1e3*o)}),{capture:!0})}},{key:"trackForm",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.trackFormTargets&&0!==this.trackFormTargets.length)for(var n=["focus","change"],o=function(o){for(var r={fmName:e.trackFormTargets[o].name||e.trackFormTargets[o].id||"-",fmAttr:e.trackFormTargets[o].dataset,fmItems:{}},i=function(t){T.removeListener(A.form[n[t]]),A.form[n[t]]=T.addListener(e.trackFormTargets[o],n[t],(function(e){r=M.getFormStats(r,n[t],e.target,I)}),!0)},a=0;a<n.length;a++)i(a);T.removeListener(A.form_emit),A.form_emit=T.addListener(window[b],O,(function(){e.trackAction("stats","form",M.mergeObj([r,t]))}),!1)},r=0;r<this.trackFormTargets.length;r++)o(r)}},{key:"getQueryVal",value:function(e){return C.Query[e]?C.Query[e]:""}}])&&w(t.prototype,n),o&&w(t,o),e}();window.Ingestly=new R}]);